# PyStock - A股数据本地化归档工具

## 项目简介

PyStock是一个功能强大的A股数据本地化归档工具，专为个人投资者和数据分析师设计。本工具可以自动下载、处理和归档A股历史交易数据，并根据股票上市年限进行智能分类，便于后续分析和研究。

## 主要功能

- **数据获取**：自动下载A股全部股票的历史交易数据
- **智能分类**：根据股票上市年限自动归档到不同文件夹
- **成交次数计算**：使用多因子模型智能计算每日成交次数
- **数据完整性**：获取从股票上市日期至今的所有可用历史数据
- **错误修复**：内置分类修复功能，可自动检测并修复错误分类的股票文件
- **多线程支持**：支持单线程和多线程模式，提升数据处理效率

## 技术特点

- 使用akshare库获取股票数据
- 智能反爬虫机制，避免请求过于频繁
- 自动重试和错误处理机制
- 缓存系统减少重复请求
- 自适应速度控制，根据网络状况调整请求频率
- 支持断点续传，可随时中断和恢复下载

## 运行模式

1. **初始化模式**：首次运行，下载所有可用历史数据
2. **更新模式**：日常使用，仅追加最新数据
3. **分类修复模式**：检查并修复错误分类的股票文件
4. **测试年限计算**：测试上市年限计算逻辑

## 安装与使用

### 环境要求

- Python 3.7+
- 依赖库：见requirements.txt

### 安装步骤

1. 克隆仓库到本地：
```bash
git clone https://github.com/yourusername/PyStock.git
cd PyStock
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

### 使用方法

直接运行主程序：
```bash
python astock_main.py
```

按照提示选择运行模式和参数设置。

## 文件结构

- `astock_main.py`：主程序
- `build_main.py`：打包脚本
- `requirements.txt`：依赖库列表
- `使用指南.md`：详细使用说明

## 数据存储格式

数据按股票上市年限分类存储在不同文件夹中，例如：
- `0年/`：上市不满1年的股票
- `1年/`：上市1年的股票
- ...
- `35年/`：上市35年的股票

每只股票数据存储为Excel文件，包含以下字段：
- 时间、开盘价、最高价、最低价、收盘价
- 涨幅、振幅、总手数、金额、换手率
- 成交次数（智能计算）、名称

## 年限计算逻辑

股票上市年限计算采用简化的自然年逻辑：
```python
上市年限 = 当前年份 - 上市年份
```

## 注意事项

- 首次运行时间较长，请耐心等待
- 建议使用稳定的网络连接
- 数据保存位置默认为`D:/股票归档`，可在代码中修改

## 许可证

MIT License 